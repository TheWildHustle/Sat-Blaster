{
  "version": 3,
  "sources": ["../../irisdb-hooks/dist/irisdb-hooks.es.js"],
  "sourcesContent": ["import { PublicKey as k, ndk as E, Hex as K, publicState as A } from \"irisdb-nostr\";\nimport { useEffect as d, useState as g, useCallback as N, useMemo as b } from \"react\";\nimport { localState as x } from \"irisdb\";\nfunction p(t, s, e, n = (f) => f, r = !1, u = 1, S = !0) {\n  d(() => {\n    S && !e && t.get(s).once(\n      (i) => {\n        e = n(i);\n      },\n      void 0,\n      u\n    );\n  }, [t, s, e]);\n  const [f, c] = g(S ? e : /* @__PURE__ */ new Map());\n  d(() => t.get(s).on(\n    (o, a, m, w) => {\n      c(S ? n(o) : (M) => {\n        const h = new Map(M);\n        return h.set(a, n(o)), h;\n      }), r && w();\n    },\n    void 0,\n    u,\n    void 0,\n    S\n  ), [t, s, r]);\n  const l = N(\n    (i) => {\n      t.get(s).put(i);\n    },\n    [t, s]\n  );\n  return [f, l];\n}\nfunction v(t, s, e, n, r = !1, u = 1) {\n  return p(t, s, e, n, r, u, !0);\n}\nfunction B(t, s, e, n = !1, r = 1) {\n  return p(t, s, void 0, e, n, r, !1);\n}\nfunction H(t, s, e = (r) => r, n = 1) {\n  return v(x, t, s, e, !1, n);\n}\nfunction L(t, s) {\n  const [e] = H(\"user/publicKey\", \"\"), n = b(() => t ? t === \"follows\" ? e ? [String(e)] : [] : [new k(t).toString()] : [], [e, t]), [r, u] = g(new Set(n));\n  return d(() => {\n    if (e && t === \"follows\") {\n      const f = E().subscribe({ kinds: [3], authors: [String(e)] });\n      return f.on(\"event\", (c) => {\n        if (c.kind === 3) {\n          const l = /* @__PURE__ */ new Set([String(e)]);\n          let i = !1;\n          c.tags.forEach((o) => {\n            if (o[0] === \"p\")\n              try {\n                new K(o[1], 64), l.has(o[1]) || (l.add(o[1]), i = !0);\n              } catch {\n                console.error(\"Invalid public key\", o[1]);\n              }\n          }), i && u(l);\n        }\n      }), () => f.stop();\n    }\n  }, [t, e]), d(() => {\n    const f = new Set(n);\n    if ((!r || Array.from(r).sort().toString() !== Array.from(f).sort().toString()) && u(f), !(!t || t === \"follows\") && s)\n      return A(t).get(s).forEach(\n        (c, l) => {\n          u((i) => {\n            const o = l.split(\"/\").pop(), a = new Set(i), m = a.has(o);\n            return c && !m ? (a.add(o), a) : !c && m ? (a.delete(o), a) : i;\n          });\n        },\n        0,\n        Boolean\n      );\n  }, [t, s, n]), b(() => Array.from(r), [r]);\n}\nfunction j(t, s, e, n, r = 1) {\n  const u = b(() => A(t), [t]);\n  return v(u, s, e, n, !1, r);\n}\nfunction q(t, s, e, n = 1) {\n  const r = b(() => A(t), [t]);\n  return B(r, s, e, !1, n);\n}\nexport {\n  L as useAuthors,\n  H as useLocalState,\n  v as useNodeState,\n  q as usePublicGroupState,\n  j as usePublicState\n};\n"],
  "mappings": "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",
  "names": ["d", "g", "N", "b"]
}
